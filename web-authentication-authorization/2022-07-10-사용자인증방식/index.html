<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="naver-site-verification" content="61ed46fa0648e711aa23390ddbbf3d67e29d07a4"/><meta data-react-helmet="true" name="google-site-verification" content="Hc95Zbo81uWpDDzkYJc1kv56xWa7Pc3PHvKL_oe8hDk"/><meta data-react-helmet="true" name="twitter:creator" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:site" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:image" content="/static/216e55d377701b363c34dfb0425e8223/icon.jpeg"/><meta data-react-helmet="true" name="twitter:description" content="사용자 인증, 인가 방식에 대해서 알아보자."/><meta data-react-helmet="true" name="twitter:title" content="사용자 인증, 인가 방식"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:site_name" content="사용자 인증, 인가 방식"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="/static/216e55d377701b363c34dfb0425e8223/icon.jpeg"/><meta data-react-helmet="true" property="og:description" content="사용자 인증, 인가 방식에 대해서 알아보자."/><meta data-react-helmet="true" property="og:title" content="사용자 인증, 인가 방식"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" name="description" content="사용자 인증, 인가 방식에 대해서 알아보자."/><meta name="generator" content="Gatsby 4.17.1"/><style data-href="/styles.b7c80fc3b56bc8590ce9.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}:root{--border-radius:4px;--color-text:#333;--color-primary:#7026b9;--color-code-bg:#fff4db;--color-code:#8a6534;--font-sans:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";--font-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--font-lg:18px;--font-md:16px;--font-sm:14px;--font-sx:12px;--line-height-loose:1.75;--line-height-normal:1.5;--line-height-dense:1.1;--space-1:4px;--space-2:8px;--space-3:16px;--space-4:24px;--space-5:32px;--space-6:64px;--size-content:54rem;--size-gutter:var(--space-5);--size-gap:var(--space-6)}html{-webkit-text-size-adjust:100%;box-sizing:border-box;font:sans-serif;font-size:var(--font-md);line-height:var(--line-height-normal);overflow-y:scroll}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;word-wrap:break-word;color:var(--color-text);font-family:sans-serif;font-family:var(--font-sans);font-weight:400;margin:0}a{background-color:transparent;color:var(--color-primary);font-weight:500;text-decoration:none;text-decoration:underline;text-decoration-thickness:1.5px;text-underline-offset:2px}a:active,a:hover{outline-width:0;text-decoration:none}abbr[title]{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help;text-decoration:none}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{letter-spacing:-.01em;line-height:var(--line-height-dense);margin:0 0 3rem;padding:0}h1>b{color:var(--color-primary)}img{border-style:none;max-width:100%}code,kbd,pre,samp{font-family:var(--font-mono);font-size:1em;line-height:inherit}hr{background:rgba(0,0,0,.2);border:none;box-sizing:content-box;height:1px;margin-bottom:calc(var(--space-4) - 1px);margin-left:0;margin-right:0;margin-top:0;overflow:visible;padding:0}*,:after,:before{box-sizing:inherit}dd,dl,fieldset,figure,hgroup,img,ol,p,ul{margin:0;margin-bottom:var(--space-4);padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin-left:var(--space-4)}pre{word-wrap:normal;background:rgba(0,0,0,.04);border-radius:var(--border-radius);font-size:.875rem;line-height:var(--line-height-normal);margin-bottom:var(--space-4);margin-left:0;margin-right:0;margin-top:0;overflow:auto;padding:var(--space-4)}b,dt,strong,th{font-weight:700}li{margin-bottom:calc(var(--space-4)/2)}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:calc(var(--space-4)/2);margin-left:var(--space-4);margin-top:calc(var(--space-4)/2)}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:calc(var(--space-4)/2)}p{max-width:680px}code,kbd,samp{font-size:.875rem}abbr,acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}code,tt{background-color:var(--color-code-bg);border-radius:var(--border-radius);color:var(--color-code);font-family:var(--font-mono);padding-bottom:.25em;padding-top:.25em;word-break:normal}pre code{background:none}code:after,code:before,tt:after,tt:before{content:"\00a0";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:none}</style><link rel="canonical" href="https://brawman.github.io/web-authentication-authorization/2022-07-10-사용자인증방식/" data-baseprotocol="https:" data-basehost="brawman.github.io"/><title data-react-helmet="true">사용자 인증, 인가 방식</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global kxm5mf">@import url('https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Nanum Myeongjo',serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:1920px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1080&#x27; width=&#x27;1920&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAgFBgn/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHU1QG3hC1AH//EABsQAAICAwEAAAAAAAAAAAAAAAIDAAEEBQYH/9oACAEBAAEFAmHa1+VdF1+6ZMkaJGMsadP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAnEAACAgECBAYDAAAAAAAAAAABAgMFBCExABAREwYSFCIjQlFhYv/aAAgBAQAGPwKSRUMrRxySLEN5WRGcRjpr1kI8g/bcWkfiepu8BRWUdjHLcRzqFs817BLXAxO9WV3ZhxxHhuMFPULhg6SfMeUgO3T8kbEHca8Ifdorbu7fX+mPL//EABoQAQEBAQADAAAAAAAAAAAAAAERIQAQMUH/2gAIAQEAAT8htZCHJnMXIWEFzoKosNDtCaUmzxfqi4iiIgInx4lUxTvYsBddS74//9oADAMBAAIAAwAAABDwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABcQAQEBAQAAAAAAAAAAAAAAAAERIRD/2gAIAQEAAT8Q2fSzEYJWkoIFX/oPFZ+uITwKpgQCTRwCIro0UWkYJAqqnG4pNu8//9k=" alt=""/><picture><source type="image/webp" data-srcset="/static/216e55d377701b363c34dfb0425e8223/0df1a/icon.webp 480w,/static/216e55d377701b363c34dfb0425e8223/eeb31/icon.webp 960w,/static/216e55d377701b363c34dfb0425e8223/702da/icon.webp 1920w" sizes="(min-width: 1920px) 1920px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1920px) 1920px, 100vw" decoding="async" loading="lazy" data-src="/static/216e55d377701b363c34dfb0425e8223/8cf01/icon.jpg" data-srcset="/static/216e55d377701b363c34dfb0425e8223/b19bf/icon.jpg 480w,/static/216e55d377701b363c34dfb0425e8223/175be/icon.jpg 960w,/static/216e55d377701b363c34dfb0425e8223/8cf01/icon.jpg 1920w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/216e55d377701b363c34dfb0425e8223/0df1a/icon.webp 480w,/static/216e55d377701b363c34dfb0425e8223/eeb31/icon.webp 960w,/static/216e55d377701b363c34dfb0425e8223/702da/icon.webp 1920w" sizes="(min-width: 1920px) 1920px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1920px) 1920px, 100vw" decoding="async" loading="lazy" src="/static/216e55d377701b363c34dfb0425e8223/8cf01/icon.jpg" srcSet="/static/216e55d377701b363c34dfb0425e8223/b19bf/icon.jpg 480w,/static/216e55d377701b363c34dfb0425e8223/175be/icon.jpg 960w,/static/216e55d377701b363c34dfb0425e8223/8cf01/icon.jpg 1920w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1st1jau1"><style data-emotion="css gywgo7">.css-gywgo7{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-gywgo7{width:30px;height:30px;font-size:18px;}}</style><div class="css-gywgo7 e1st1jau0"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M447.1 256C447.1 273.7 433.7 288 416 288H109.3l105.4 105.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L109.3 224H416C433.7 224 447.1 238.3 447.1 256z"></path></svg></div><style data-emotion="css gn4qtp">.css-gn4qtp{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-gn4qtp{font-size:30px;}}</style><div class="css-gn4qtp e1st1jau3">사용자 인증, 인가 방식</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau2"><div>글또 / 인증 / 인가 / web</div><div>2022.07.10.</div></div></div></div><style data-emotion="css uo146q">.css-uo146q{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:1.8;font-size:16px;font-weight:400;}.css-uo146q p{padding:3px 0;}.css-uo146q h1,.css-uo146q h2,.css-uo146q h3{font-weight:800;margin-bottom:30px;}.css-uo146q *+h1,.css-uo146q *+h2,.css-uo146q *+h3{margin-top:80px;}.css-uo146q hr+h1,.css-uo146q hr+h2,.css-uo146q hr+h3{margin-top:0;}.css-uo146q h1{font-size:30px;}.css-uo146q h2{font-size:25px;}.css-uo146q h3{font-size:20px;}.css-uo146q blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}.css-uo146q ol,.css-uo146q ul{margin-left:20px;padding:30px 0;}.css-uo146q hr{border:1px solid #000000;margin:100px 0;}.css-uo146q a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-uo146q pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}.css-uo146q pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-uo146q code[class*='language-'],.css-uo146q pre[class*='language-']{tab-size:2;}@media (max-width: 768px){.css-uo146q{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-uo146q h1{font-size:23px;}.css-uo146q h2{font-size:20px;}.css-uo146q h3{font-size:17px;}.css-uo146q img{width:100%;}.css-uo146q hr{margin:50px 0;}}</style><div class="css-uo146q e1ijh0y10"><h1>사용자 인증, 인가 방식</h1>
<h2>개요</h2>
<ul>
<li>웹서비스를 개발할때 필요한 사용자 인증, 인가에 대해서 조사해보자.</li>
</ul>
<h2>사용자 인증 방식</h2>
<h3>구성 요소</h3>
<ul>
<li>인증: 사용자가 누구인지 확인하는 과정.</li>
<li>인가: 사용자가 요청하는 리소스에 대해서 권한을 확인하는 과정.</li>
</ul>
<h3>종류</h3>
<ul>
<li>크게 세션/쿠키 방식과 토큰기반 방식으로 나뉠 수 있다.</li>
</ul>
<h3>세션 방식</h3>
<ul>
<li>사용자 인증 후 서버에서 사용자 정보를 세션 저장소에 저장하고 세션 ID를 사용자에게 전달.
사용자는 전달받은 세션 ID를 쿠키에 저장 후 리소스에 접근할때 쿠키를 같이 전달해서 사용자 정보를 검증한다.</li>
</ul>
<h3>토큰 방식</h3>
<ul>
<li>인증받은 사용자에게 토큰을 발급하고 사용자는 리소스에 접근할 때 http 헤더에 토큰을 같이 전달해서 인증/인가에 대한 유효성을 검증한다.</li>
</ul>
<h3>참고 다이어그램</h3>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2cc14c85232972186e28fc2380b03ef1/41314/ana1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 60.9375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABhUlEQVQoz22SC2+CQBCE/f//UG0trzusRhAEwRfTfNsswaaXXDiW2dmZOVbP51MhBOV5piLPlRe50jRRmmU6n89ivV4vdV2nEINh+V6EQlmWKUmSN9zqcrlo+7HVbrdTjFHjOFpzmqb63H1abRgH9dde681am81aWZ7per3qdrspllHb7UYhFKrqSqu+75UkXzocDrrf7zZpmia1bWuguq6skY0qCCDz1XUXxRhUn2urr7AMmNU0jaqqEqqpsxniZ/b0mszF6XQyq95LzSwDQuUwDKayLEsdj0ezCDFTnQxM1/dq20ZlGfX9vTcRRAQWZ0ZIkUYasMrZs+TphAwGSw0c7yjkSY8pfDweRvSbR2dTATPNs3NCzkTA89fJYXYAxxshBGxfnL35L+ESBwkcc4bLF9Tt9/vZ6n8KwWOR/xUnTjgrBAgB0gG0TTMH7XkuL4XwIeSGOdtF/b0UGv1X4F8DgDUPfXkpPgiFdV0bjqFvlwKZZ8aZ2jJD3tmeoakdhznPpeUfKuCe/2VPtBAAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/2cc14c85232972186e28fc2380b03ef1/a59e9/ana1.webp 192w,
/static/2cc14c85232972186e28fc2380b03ef1/0ca9f/ana1.webp 384w,
/static/2cc14c85232972186e28fc2380b03ef1/dc9b9/ana1.webp 768w,
/static/2cc14c85232972186e28fc2380b03ef1/ae5bd/ana1.webp 1074w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/2cc14c85232972186e28fc2380b03ef1/3b721/ana1.png 192w,
/static/2cc14c85232972186e28fc2380b03ef1/66595/ana1.png 384w,
/static/2cc14c85232972186e28fc2380b03ef1/fe486/ana1.png 768w,
/static/2cc14c85232972186e28fc2380b03ef1/41314/ana1.png 1074w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/2cc14c85232972186e28fc2380b03ef1/fe486/ana1.png"
            alt="다이어그램"
            title="다이어그램"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h2>OAuth 2.0</h2>
<h3>정의</h3>
<ul>
<li>OAuth 2.0 프레임워크는 는 인터넷 사용자들이 비밀번호를 제공하지 않고
다른 웹사이트 상의 자신들의 정보에 대해 웹사이트나 애플리케이션의 접근 권한을 부여할 수 있는 공통적인 수단으로서 사용되는,
접근 위임을 위한 개방형 표준이다. ( <a href="https://datatracker.ietf.org/doc/html/rfc6749" target="_blank" rel="nofollow">rfc-6749</a> )</li>
</ul>
<h3>순서도</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">  +--------+                                           +---------------+
  |        |--(A)------- Authorization Grant --------->|               |
  |        |                                           |               |
  |        |&lt;-(B)----------- Access Token -------------|               |
  |        |               &amp; Refresh Token             |               |
  |        |                                           |               |
  |        |                            +----------+   |               |
  |        |--(C)---- Access Token ---->|          |   |               |
  |        |                            |          |   |               |
  |        |&lt;-(D)- Protected Resource --| Resource |   | Authorization |
  | Client |                            |  Server  |   |     Server    |
  |        |--(E)---- Access Token ---->|          |   |               |
  |        |                            |          |   |               |
  |        |&lt;-(F)- Invalid Token Error -|          |   |               |
  |        |                            +----------+   |               |
  |        |                                           |               |
  |        |--(G)----------- Refresh Token ----------->|               |
  |        |                                           |               |
  |        |&lt;-(H)----------- Access Token -------------|               |
  +--------+           &amp; Optional Refresh Token        +---------------+</code></pre></div>
<h3>Access token</h3>
<ul>
<li>OAuth시 Access Token으로 Bearer Token 타입을 사용함</li>
<li>Bearer Token은 <a href="https://datatracker.ietf.org/doc/html/rfc6750" target="_blank" rel="nofollow">rfc-6750</a>에서 정의하고 있음</li>
<li>HTTP Header에 “Bearer 2pWS6RQmdZpE0TQ93X”와 같이 type credentials 형식으로 들어감</li>
<li>클라이언트에게는 별다른 의미가 없는 문자열이나 이 토큰을 가지고 인증서버에서 DB에 접근해서 유효성 검증</li>
</ul>
<h3>Access token요청</h3>
<ul>
<li>
<p>호출</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">   POST /token HTTP/1.1
   Host: server.example.com
   Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
   Content-Type: application/x-www-form-urlencoded

   grant_type=password&amp;username=johndoe&amp;password=A3ddj3w</code></pre></div>
</li>
<li>
<p>응답</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">   HTTP/1.1 200 OK
   Content-Type: application/json;charset=UTF-8
   Cache-Control: no-store
   Pragma: no-cache

   {
     "access_token":"2YotnFZFEjr1zCsicMWpAA",
     "token_type":"example",
     "expires_in":3600,
     "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",
     "example_parameter":"example_value"
   }</code></pre></div>
</li>
</ul>
<h3>Access token 갱신 호출</h3>
<ul>
<li>
<p>호출</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">   POST /token HTTP/1.1
   Host: server.example.com
   Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
   Content-Type: application/x-www-form-urlencoded

   grant_type=refresh_token&amp;refresh_token=tGzv3JOkF0XG5Qx2TlKWIA</code></pre></div>
</li>
<li>
<p>응답</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">   HTTP/1.1 200 OK
   Content-Type: application/json;charset=UTF-8
   Cache-Control: no-store
   Pragma: no-cache

   {
     "access_token":"2YotnFZFEjr1zCsicMWpAA",
     "token_type":"example",
     "expires_in":3600,
     "example_parameter":"example_value"</code></pre></div>
</li>
</ul>
<h2>JWT</h2>
<ul>
<li><a href="https://datatracker.ietf.org/doc/html/rfc7519" target="_blank" rel="nofollow">RFC 7519</a></li>
<li>기본적인 Access Token은 진위 여부를 확인하기 위해서 인증서버에서 검증이 이뤄져야 했으나
JWT는 Token 안에 위조여부를 확인하기 위한 값, 유효성 검증을 위한 값, 그리고 인증정보를 담고 있다.
이로 인해 인증서버에 묻지 않고 유효성 검증할 수 있다.</li>
<li>header, payload, signature 3가지로 구성됨</li>
</ul>
<h3>예시</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">header = '{"alg":"HS256","typ":"JWT"}'

payload = '{"loggedInAs":"admin","iat":1422779638}'

key           = 'secretkey'
unsignedToken = encodeBase64(header) + '.' + encodeBase64(payload)
signature     = HMAC-SHA256(key, unsignedToken) 

token = encodeBase64(header) + '.' + encodeBase64(payload) + '.' + encodeBase64(signature)
// eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJsb2dnZWRJbkFzIjoiYWRtaW4iLCJpYXQiOjE0MjI3Nzk2Mzh9.gzSraSYS8EXBxLN_oWnFSRgCzcmJmMjLiuyu5CSpyHI</code></pre></div>
<h3>표준 필드</h3>
<table>
<thead>
<tr>
<th>필드</th>
<th>영어</th>
<th align="right">한국어</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>iss</td>
<td>issuer</td>
<td align="right">발행자</td>
<td>JWT의 발행자</td>
</tr>
<tr>
<td>sub</td>
<td>subject</td>
<td align="right">제목</td>
<td>JWT의 제목</td>
</tr>
<tr>
<td>aud</td>
<td>audience</td>
<td align="right">청중</td>
<td>JWT가 의도한 접수자</td>
</tr>
<tr>
<td>exp</td>
<td>expiration time</td>
<td align="right">만료일시</td>
<td>JWT가 만료(무효화)되는 일시</td>
</tr>
<tr>
<td>nbf</td>
<td>not before</td>
<td align="right">시작일시</td>
<td>JWT가 시작(유효화)되는 일시</td>
</tr>
<tr>
<td>iat</td>
<td>issued at</td>
<td align="right">발행일시</td>
<td>JWT가 발행되는 일시</td>
</tr>
<tr>
<td>jti</td>
<td>JWT ID</td>
<td align="right">JWT 아이디</td>
<td>토큰의 유니크식별자. 대소문자 구별</td>
</tr>
<tr>
<td>typ</td>
<td>token type</td>
<td align="right">토큰 타입</td>
<td></td>
</tr>
<tr>
<td>cty</td>
<td>content type</td>
<td align="right">컨텐트 타입</td>
<td>항상 JWT</td>
</tr>
<tr>
<td>alg</td>
<td>message authentication code algorithm</td>
<td align="right">메시지인증코드 알고리즘</td>
<td>발행자가 시그니처를 검증하기 위해 정한 알고리즘</td>
</tr>
</tbody>
</table>
<h3>header</h3>
<ul>
<li>
<p>signature 생성을 위해 사용한 알고리즘을 명시 (ex: RS256)</p>
</li>
<li>
<p>key rolling을 지원하는 경우, 존재하는 여러개의 key 중 어떤 key를 signature를 생성 할 때 사용했는지 알기 위해 kid (key 별로 unique한 값이 정의되어 있음)를 포함하기도 한다.</p>
<blockquote>
<p>{
“alg”: “ES256”,
“kid”: “Key ID”
}</p>
</blockquote>
</li>
</ul>
<h3>payload</h3>
<ul>
<li>JSON key-value 형태로 데이터들이 포함되어있으며, 이곳에 포함된 각 필드를 클레임(Claim)이라고 부른다.</li>
<li>예시) JWT를 유저인증을 위해 사용하는 경우 payload에 토큰을 발급받은 사용자의ID 값을 aud 필드에 포함하면 되고, 다음과 같은 절차를 따른다.
<ul>
<li>JWT를 이용하여 application server에 요청</li>
<li>server에서 JWT의 signature 유효성을 확인하고</li>
<li>유효 하다면 payload에서 사용자 ID값을 읽어들여서 요청을 보낸 사람이 어떤 사용자 인지 인증 할 수 있다.</li>
</ul>
</li>
</ul>
<h3>signature</h3>
<ul>
<li>설명을 간단히 하기위해 header와 payload를 concat 한 값을 message라고 하자.</li>
<li>해당 message가 변조되지 않았는지 검사하기 위해 서명이 필요하고, 아래 두가지 방식이 대표적이다. 더 보안성을 좋게하기 위해서 비트(bit) 수를 늘려 256 대신 384나 512를 사용하기도 한다.</li>
<li>RS256 (RSA Signature with SHA-256)
<ul>
<li>비대칭키 방식</li>
<li>message에 SHA256적용 후 private key 사용해서 암호화</li>
<li>JWT를 발급한 서버뿐만아니라, JWT를 받아서 사용하는 어떤 주체라도 signature 유효성 검증이 가능</li>
<li>일반적으로 public key는 JWT를 발급한 서버에서 JWK (JSON Web Key)에 정의된 방식을 통해 공개적으로 제공</li>
<li>aws의 비대칭 검증 <a href="https://docs.aws.amazon.com/ko_kr/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-verifying-a-jwt.html#amazon-cognito-user-pools-using-tokens-step-2" target="_blank" rel="nofollow">참조</a></li>
</ul>
</li>
<li>HS256 (HMAC with SHA-256)
<ul>
<li>대칭키 방식</li>
<li>message에 SHA256 적용 후 대칭키 사용해서 암호화</li>
<li>JWT를 발급한 서버 또는 해당 대칭키를 미리 공유해서 알고있는 주체들만 signature 유효성 검증이 가능하다.</li>
</ul>
</li>
</ul>
<h2>JWT를 안전하게 저장하기</h2>
<h3>localStorage</h3>
<ul>
<li>XSS 공격에 취약함, 같은 도메인에 대해서 javascript를 이용해서 쉽게 접근할 수 있음</li>
</ul>
<h3>cookie</h3>
<ul>
<li>CSRF 공격에 취약함, httpOnly를 적용하면 XSS 공격에 비교적 안전하다. 하지만 사용자에게 의도하지 않은 링크로
위조를 유도하는 CSRF에 취약할 수 있다. 관련해서 CSRF 방어를 위한 방법이 있다.( <a href="https://spring.io/blog/2013/08/21/spring-security-3-2-0-rc1-highlights-csrf-protection/" target="_blank" rel="nofollow">방법1</a>, <a href="https://itstory.tk/entry/CSRF-%EA%B3%B5%EA%B2%A9%EC%9D%B4%EB%9E%80-%EA%B7%B8%EB%A6%AC%EA%B3%A0-CSRF-%EB%B0%A9%EC%96%B4-%EB%B0%A9%EB%B2%95" target="_blank" rel="nofollow">방법2</a> )</li>
</ul>
<h3>결론</h3>
<ul>
<li>access token은 메모리에 저장하고 refresh token은 httpOnly 쿠키에 저장(웹일경우)</li>
<li>access token은 만료 기간을 짧게 가져가고 refresh token은 access token보다는 길게 가져 간다.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 34.895833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA20lEQVQoz41Qi27EIAzr/3/oJt22Uh6BAkk9OV1Pt+lOWiQTlBgnZplTIbWh7R37PhxjKvqYr9EnWuue+1DPYyiO48BCgbf3G9YQscWMz6+AIjuk7qitPwV7t48VRRqkdgd1XHDOiZQSGDoVpRTklDDH8BpJzxBjxLqu/tbU7tyFh5mdRPwvzA4fnFLGeBjMWPRnQxZ6H9i2DTEmlCLIOUNE7iAv5Qw1Q2sNdEdB5mvzxVQhUk/Lqi7C6bwT7NMBcdX4MITgA2qtLv5gGb/+6gpeX4GWVe0P/7T8Der6JYN67iIQAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/75b896ab9801d2c10c1fc4ecc66d7430/a59e9/ana2.webp 192w,
/static/75b896ab9801d2c10c1fc4ecc66d7430/0ca9f/ana2.webp 384w,
/static/75b896ab9801d2c10c1fc4ecc66d7430/dc9b9/ana2.webp 768w,
/static/75b896ab9801d2c10c1fc4ecc66d7430/dc5e0/ana2.webp 875w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/75b896ab9801d2c10c1fc4ecc66d7430/3b721/ana2.png 192w,
/static/75b896ab9801d2c10c1fc4ecc66d7430/66595/ana2.png 384w,
/static/75b896ab9801d2c10c1fc4ecc66d7430/fe486/ana2.png 768w,
/static/75b896ab9801d2c10c1fc4ecc66d7430/8b7fc/ana2.png 875w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/75b896ab9801d2c10c1fc4ecc66d7430/fe486/ana2.png"
            alt="카카오참고"
            title="카카오참고"
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
    </span>
<code class="language-text">*</code> <a href="https://developers.kakao.com/docs/latest/ko/kakaologin/common#%ED%86%A0%ED%81%B0-%EC%A0%95%EB%B3%B4" target="_blank" rel="nofollow">카카오 참고</a></li>
</ul></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">방송, 라이브 스트리밍, 증권 백엔드 개발자<!-- --><br/>© 2022 Developer brawman, Powered By Gatsby.<!-- --></footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/web-authentication-authorization/2022-07-10-사용자인증방식/";window.___webpackCompilationHash="28d0f5d2ffad660df1a4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4718f0fec20e0d09d7f5.js"],"app":["/app-66d4d38e9cd411112f2a.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-cf4e681ec010cf32b641.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-1aa9ed239e668341aca9.js"],"component---src-pages-info-tsx":["/component---src-pages-info-tsx-1e187b269e2c0a84abd7.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-644aa23b9ffff0a3399e.js"],"component---src-pages-using-ssr-js":["/component---src-pages-using-ssr-js-f8ebefa1deb47f0c7d85.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-e182cf44ceaa44b2f0c9.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-8895692d6ad3902163f8.js"],"component---src-templates-using-dsg-js":["/component---src-templates-using-dsg-js-f714b9a750e6fc469575.js"]};/*]]>*/</script><script src="/polyfill-4718f0fec20e0d09d7f5.js" nomodule=""></script><script src="/app-66d4d38e9cd411112f2a.js" async=""></script><script src="/framework-76c8a3fb7ea2f02f21d3.js" async=""></script><script src="/webpack-runtime-defea05f6f6db9972d98.js" async=""></script></body></html>